!function(e){"use strict";var i={pips:function(i){function l(i){var l,s,a,t,n,r=[],p=0;if(g&&g.length){for(a=u.element.slider("values"),t=e.map(a,function(e){return Math.abs(e-i)}),n=Math.min.apply(Math,t),l=0;l<t.length;l++)t[l]===n&&r.push(l);for(p=r[0],s=0;s<r.length;s++)u._lastChangedValue===r[s]&&(p=r[s])}return p}function s(i){if(!u.option("disabled")){var s=e(i).data("value"),a=l(s);g&&g.length?u.element.slider("values",a,s):u.element.slider("value",s),u._lastChangedValue=a}}function a(i){var l,s,a=i,n="ui-slider-pip",r="";"first"===i?a=0:"last"===i&&(a=b);var p=c+u.options.step*a,d=p.toString().replace(".","-");if(l="array"===e.type(x.labels)?x.labels[a]||"":"object"===e.type(x.labels)?"first"===i?x.labels.first||"":"last"===i?x.labels.last||"":"array"===e.type(x.labels.rest)?x.labels.rest[a-1]||"":p:p,"first"===i?(s="0%",n+=" ui-slider-pip-first",n+="label"===x.first?" ui-slider-pip-label":"",n+=!1===x.first?" ui-slider-pip-hide":""):"last"===i?(s="100%",n+=" ui-slider-pip-last",n+="label"===x.last?" ui-slider-pip-label":"",n+=!1===x.last?" ui-slider-pip-hide":""):(s=(100/b*i).toFixed(4)+"%",n+="label"===x.rest?" ui-slider-pip-label":"",n+=!1===x.rest?" ui-slider-pip-hide":""),n+=" ui-slider-pip-"+d,g&&g.length){for(t=0;t<g.length;t++)p===g[t]&&(n+=" ui-slider-pip-initial-"+(t+1),n+=" ui-slider-pip-selected-"+(t+1));u.options.range&&p>g[0]&&p<g[1]&&(n+=" ui-slider-pip-inrange")}else p===v&&(n+=" ui-slider-pip-initial",n+=" ui-slider-pip-selected"),u.options.range&&("min"===u.options.range&&v>p||"max"===u.options.range&&p>v)&&(n+=" ui-slider-pip-inrange");return r="horizontal"===u.options.orientation?"left: "+s:"bottom: "+s,'<span class="'+n+'" style="'+r+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+p+'">'+x.formatLabel(l)+"</span></span>"}var t,n,r,p,d,u=this,o="",f=e._data(u.element.get(0),"events").mousedown,c=u._valueMin(),h=u._valueMax(),v=u._value(),g=u._values(),b=(h-c)/u.options.step,m=u.element.find(".ui-slider-handle"),x={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:b>100?Math.floor(.05*b):1,formatLabel:function(e){return this.prefix+e+this.suffix}};e.extend(x,i),u.options.pipStep=x.step,u.element.addClass("ui-slider-pips").find(".ui-slider-pip").remove();var y={single:function(i){this.resetClasses(),d.filter(".ui-slider-pip-"+this.classLabel(i)).addClass("ui-slider-pip-selected"),u.options.range&&d.each(function(l,s){var a=e(s).children(".ui-slider-label").data("value");("min"===u.options.range&&i>a||"max"===u.options.range&&a>i)&&e(s).addClass("ui-slider-pip-inrange")})},range:function(i){for(this.resetClasses(),t=0;t<i.length;t++)d.filter(".ui-slider-pip-"+this.classLabel(i[t])).addClass("ui-slider-pip-selected-"+(t+1));u.options.range&&d.each(function(l,s){var a=e(s).children(".ui-slider-label").data("value");a>i[0]&&a<i[1]&&e(s).addClass("ui-slider-pip-inrange")})},classLabel:function(e){return e.toString().replace(".","-")},resetClasses:function(){var e=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/ig;d.removeClass(function(i,l){return(l.match(e)||[]).join(" ")})}};for(u.options.pipStep=Math.round(u.options.pipStep),o+=a("first"),r=1;b>r;r++)r%u.options.pipStep===0&&(o+=a(r));for(o+=a("last"),u.element.append(o),d=u.element.find(".ui-slider-pip"),n=0;n<f.length;n++)"slider"===f[n].namespace&&(p=f[n].handler);u.element.off("mousedown.slider").on("mousedown.selectPip",function(i){var a=e(i.target),t=l(a.data("value")),n=m.eq(t);n.addClass("ui-state-active"),a.is(".ui-slider-label")?(s(a),u.element.one("mouseup.selectPip",function(){n.removeClass("ui-state-active").focus()})):p(i)}),u.element.on("slide.selectPip slidechange.selectPip",function(i,l){var s=e(this),a=s.slider("value"),t=s.slider("values");l&&(a=l.value,t=l.values),t&&t.length?y.range(t):y.single(a)})},"float":function(i){function l(i){var l=[],r=e.map(i,function(e){return Math.ceil((e-t)/a.options.step)});if("array"===e.type(o.labels))for(s=0;s<i.length;s++)l[s]=o.labels[r[s]]||i[s];else if("object"===e.type(o.labels))for(s=0;s<i.length;s++)i[s]===t?l[s]=o.labels.first||t:i[s]===n?l[s]=o.labels.last||n:"array"===e.type(o.labels.rest)?l[s]=o.labels.rest[r[s]-1]||i[s]:l[s]=i[s];else for(s=0;s<i.length;s++)l[s]=i[s];return l}var s,a=this,t=a._valueMin(),n=a._valueMax(),r=a._value(),p=a._values(),d=[],u=a.element.find(".ui-slider-handle"),o={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(e){return this.prefix+e+this.suffix}};if(e.extend(o,i),t>r&&(r=t),r>n&&(r=n),p&&p.length)for(s=0;s<p.length;s++)p[s]<t&&(p[s]=t),p[s]>n&&(p[s]=n);if(a.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),o.handle)for(d=l(p&&p.length?p:[r]),s=0;s<d.length;s++)u.eq(s).append(e('<span class="ui-slider-tip">'+o.formatLabel(d[s])+"</span>"));o.pips&&a.element.find(".ui-slider-label").each(function(i,s){var a,t,n=e(s),r=[n.data("value")];a=o.formatLabel(l(r)[0]),t=e('<span class="ui-slider-tip-label">'+a+"</span>").insertAfter(n)}),"slide"!==o.event&&"slidechange"!==o.event&&"slide slidechange"!==o.event&&"slidechange slide"!==o.event&&(o.event="slidechange slide"),a.element.on(o.event,function(i,s){var a="array"===e.type(s.value)?s.value:[s.value],t=o.formatLabel(l(a)[0]);e(s.handle).find(".ui-slider-tip").html(t)})}};e.extend(!0,e.ui.slider.prototype,i)}(jQuery);